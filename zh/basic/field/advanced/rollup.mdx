---
title: "汇总"
description: "汇总字段用于对关联表中的多条数据进行聚合计算。基于关联的记录，汇总对方表中的数据，并进行求和、计数、平均值、最大/最小值等统计操作，常用于订单总额计算、任务进度统计等场景。"
---

## 一、 创建与配置

**前置条件**：与查找字段类似，创建汇总字段前必须先建立 **关联关系**。

### 1. 新建汇总字段
1. 点击表头 `+` 添加字段，选择 **汇总** 类型
2. **选择关联字段**：指定数据来源的链路
3. **选择目标字段**：指定要对哪个字段进行计算
4. **选择汇总函数**：指定具体的计算逻辑

### 2. 格式与展现
汇总后的结果（通常是数字）支持进一步的格式化处理：
- **格式化**：设置小数精度、添加货币符号（如 `$100.00`）或设置为百分比
- **交互展现**：将计算出的数值配置为进度条或环状图，增强可视化效果

## 二、 使用场景

### 场景实践：书店订单结算
- **数据表**：
    1. **书籍库表**：包含字段 `书名`、`价格`
    2. **订单表**：包含字段 `订单号`、`所选书籍`（关联字段，允许多选）
- **场景**：
    一个订单中可能包含多本书，系统需要自动计算出该订单的总金额，无需人工按计算器
- **操作步骤**：
    1. 在 **订单表** 中，确保 `所选书籍` 字段关联了多本具体的书（如订单001关联了《代码大全》$60 和 《设计模式》$40）
    2. 新建 **汇总** 字段，命名为 `订单总额`
    3. 配置逻辑：通过 `所选书籍` 关联，选择目标字段 `价格`，统计函数选择 `求和`
    4. **结果**：订单001 的总额会自动显示为 `$100`

## 三、 功能特性

### 支持的统计函数

| 公式名            | 解释                         |
| -------------- | -------------------------- |
| COUNTALL       | 计算所有的值，包括非空和空值             |
| COUNTA         | 计算非空的值                     |
| COUNT          | 计算记录的数量                    |
| SUM            | 计算所有数值的总和                  |
| MAX            | 返回所有数值中的最大值                |
| MIN            | 返回所有数值中的最小值                |
| AND            | 如果所有值都为真，则返回真              |
| OR             | 如果任何值为真，则返回真               |
| XOR            | 如果奇数个值为真，则返回真              |
| ARRAY\_JOIN    | 将数组中的所有值连接成一个字符串           |
| ARRAY\_UNIQUE  | 从数组中删除重复的值，并返回一个仅包含唯一值的新数组 |
| ARRAY\_COMPACT | 从数组中删除所有空值，并返回一个新数组        |
| CONCATENATE    | 将多个值连接成一个字符串               |

## 四、 注意事项

- **动态更新**：汇总字段的结果是实时计算的。如果修改了源数据（如调整了书的价格）或改变了关联关系（如删减了订单里的书），汇总结果会自动刷新
- **数据类型限制**：某些函数仅对特定类型生效。例如 `求和`只能用于数字字段，如果您选择了一个文本字段，系统将不会提供求和选项
- **性能提示**：大量的汇总操作可能会影响性能，特别是当涉及到的数据记录非常多时。系统会尽可能的提供最快的计算速度，建议合理规划关联结构，适时地优化和审查你的汇总设置。